<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=42999&amp;path=livereload" data-no-instant defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://unpkg.com/lunr/lunr.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>ollama_data_tools | metafunctor</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="ollama_data_tools
GitHub Link
Stars: 2 | Forks: 0 | Open Issues: 0
Languages Used: Python, Jupyter Notebook
GitHub Pages
README
Ollama Data Tools

Requirements

Python 3.x

Installation
Clone the repository and install the necessary dependencies:
git clone https://github.com/queelius/ollama_data_tools.git
cd ollama_data_tools
pip install -r requirements.txt
pip install -e .
Ollama Data Tools
The OllamaData class is the core module of the Ollama Data Tools, allowing users to work programmatically with Ollama model data. This class provides methods to access, search, and filter model information.">
    <meta name="generator" content="Hugo 0.139.2">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "Alex Towell">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)'], ['$', '$']]      
    }
  };
</script>
        
    
    
      

    

    

    
      <link rel="canonical" href="http://192.168.0.225:42999/ghprojects/ollama_data_tools/">
    

    <meta property="og:url" content="http://192.168.0.225:42999/ghprojects/ollama_data_tools/">
  <meta property="og:site_name" content="metafunctor">
  <meta property="og:title" content="ollama_data_tools">
  <meta property="og:description" content="ollama_data_tools GitHub Link Stars: 2 | Forks: 0 | Open Issues: 0 Languages Used: Python, Jupyter Notebook GitHub Pages
README Ollama Data Tools Requirements Python 3.x Installation Clone the repository and install the necessary dependencies:
git clone https://github.com/queelius/ollama_data_tools.git cd ollama_data_tools pip install -r requirements.txt pip install -e . Ollama Data Tools The OllamaData class is the core module of the Ollama Data Tools, allowing users to work programmatically with Ollama model data. This class provides methods to access, search, and filter model information.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="ghprojects">
    <meta property="article:published_time" content="2024-05-13T15:13:03+00:00">
    <meta property="article:modified_time" content="2024-05-13T15:13:03+00:00">
    <meta property="article:tag" content="GitHub">
    <meta property="article:tag" content="Project">

  <meta itemprop="name" content="ollama_data_tools">
  <meta itemprop="description" content="ollama_data_tools GitHub Link Stars: 2 | Forks: 0 | Open Issues: 0 Languages Used: Python, Jupyter Notebook GitHub Pages
README Ollama Data Tools Requirements Python 3.x Installation Clone the repository and install the necessary dependencies:
git clone https://github.com/queelius/ollama_data_tools.git cd ollama_data_tools pip install -r requirements.txt pip install -e . Ollama Data Tools The OllamaData class is the core module of the Ollama Data Tools, allowing users to work programmatically with Ollama model data. This class provides methods to access, search, and filter model information.">
  <meta itemprop="datePublished" content="2024-05-13T15:13:03+00:00">
  <meta itemprop="dateModified" content="2024-05-13T15:13:03+00:00">
  <meta itemprop="wordCount" content="1192">
  <meta itemprop="keywords" content="GitHub,Project">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ollama_data_tools">
  <meta name="twitter:description" content="ollama_data_tools GitHub Link Stars: 2 | Forks: 0 | Open Issues: 0 Languages Used: Python, Jupyter Notebook GitHub Pages
README Ollama Data Tools Requirements Python 3.x Installation Clone the repository and install the necessary dependencies:
git clone https://github.com/queelius/ollama_data_tools.git cd ollama_data_tools pip install -r requirements.txt pip install -e . Ollama Data Tools The OllamaData class is the core module of the Ollama Data Tools, allowing users to work programmatically with Ollama model data. This class provides methods to access, search, and filter model information.">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        metafunctor
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/social/" title="Social page">
              Social
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About Me page">
              About Me
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/ghprojects/" title="GitHub Projects page">
              GitHub Projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="News page">
              News
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/probsets/" title="Problem Sets page">
              Problem Sets
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/projects/" title="Projects page">
              Projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/projects-orig/" title="Projects page">
              Projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/publications/" title="Publications page">
              Publications
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/research/" title="Research projects page">
              Research projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/search/" title="Search page">
              Search
            </a>
          </li>
          
        </ul>
      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>


    <main class="pb7" role="main">
      
<section class="project-section" style="padding: 2rem; background-color: #f9f9f9;">
  <div class="container" style="max-width: 1200px; margin: 0 auto;">
    
    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
      
      
      <div>
        
        <header style="margin-bottom: 2rem;">
          <h1 style="font-size: 2.5rem; font-weight: 700; color: #333;">ollama_data_tools</h1>
          <p style="color: #555; font-size: 1.1rem; margin-bottom: 0.5rem;">
             | May 13, 2024 | <a href="mailto:" style="color: #007acc;"></a>
          </p>

          
          <div style="overflow: hidden;">
            
            <p style="font-size: 1.25rem; color: #666;"></p>
          </div>
        </header>

        
        
        <section style="margin-bottom: 1rem;">
          <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            
            <a href="https://github.com/queelius/ollama_data_tools" target="_blank" style="padding: 0.75rem 1.5rem; background-color: #007acc; color: white; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
              GitHub
            </a>
            
            <a href="https://queelius.github.io/ollama_data_tools/" target="_blank" style="padding: 0.75rem 1.5rem; background-color: #007acc; color: white; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
              GitHub Pages
            </a>
            
            
            <a href="https://twitter.com/intent/tweet?text=ollama_data_tools&url=http%3a%2f%2f192.168.0.225%3a42999%2fghprojects%2follama_data_tools%2f" target="_blank" style="padding: 0.75rem .75rem; background-color: #1DA1F2; color: white; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease;">
              <i class="fab fa-twitter"></i>
            </a>

            
            <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3a%2f%2f192.168.0.225%3a42999%2fghprojects%2follama_data_tools%2f" target="_blank" style="padding: 0.75rem .75rem; background-color: #0077B5; color: white; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease;">
              <i class="fab fa-linkedin"></i>
            </a>

            
            <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2f192.168.0.225%3a42999%2fghprojects%2follama_data_tools%2f" target="_blank" style="padding: 0.75rem .75rem; background-color: #1877F2; color: white; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease;">
              <i class="fab fa-facebook"></i>
            </a>
          </div>
        </section>
        

        
        <section style="margin-bottom: 3rem;">
          <h2 style="font-size: 1.75rem; font-weight: 600; color: #007acc;">Project Description</h2>
          <p style="font-size: 1.1rem; color: #555; line-height: 1.8;">
            <h1 id="ollama_data_tools">ollama_data_tools</h1>
<p><a href="https://github.com/queelius/ollama_data_tools">GitHub Link</a>
<strong>Stars</strong>: 2 | <strong>Forks</strong>: 0 | <strong>Open Issues</strong>: 0
<strong>Languages Used</strong>: Python, Jupyter Notebook
<a href="https://queelius.github.io/ollama_data_tools/">GitHub Pages</a></p>
<h2 id="readme">README</h2>
<h1 id="ollama-data-tools">Ollama Data Tools</h1>
<p><img src="https://img.shields.io/pypi/v/ollama_data_tools.svg" alt="PyPI version"></p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>Python 3.x</li>
</ul>
<h2 id="installation">Installation</h2>
<p>Clone the repository and install the necessary dependencies:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git clone https://github.com/queelius/ollama_data_tools.git
</span></span><span style="display:flex;"><span>cd ollama_data_tools
</span></span><span style="display:flex;"><span>pip install -r requirements.txt
</span></span><span style="display:flex;"><span>pip install -e .
</span></span></code></pre></div><h2 id="ollama-data-tools-1">Ollama Data Tools</h2>
<p>The <code>OllamaData</code> class is the core module of the Ollama Data Tools, allowing users to work programmatically with Ollama model data. This class provides methods to access, search, and filter model information.</p>
<h3 id="features">Features</h3>
<ul>
<li>Retrieve the schema of the OllamaData object.</li>
<li>Access models by name or index.</li>
<li>List all available models.</li>
<li>Perform JMESPath queries and apply regex filters on the model data.</li>
<li>Cache model data for efficient repeated access.</li>
</ul>
<h3 id="class-methods">Class Methods</h3>
<h4 id="ollamadataget_schema---dictstr-any"><code>OllamaData.get_schema() -&gt; Dict[str, Any]</code></h4>
<p>Returns the schema of the <code>OllamaData</code> object.</p>
<h4 id="ollamadata__init__cache_path-str--ollama_datacache-cache_time-str--1-day"><code>OllamaData.__init__(cache_path: str = '~/.ollama_data/cache', cache_time: str = '1 day')</code></h4>
<p>Initializes the <code>OllamaData</code> object.</p>
<ul>
<li><code>cache_path</code>: The path to the cache file.</li>
<li><code>cache_time</code>: The duration the cache is valid.</li>
</ul>
<h4 id="ollamadata__len__---int"><code>OllamaData.__len__() -&gt; int</code></h4>
<p>Returns the number of models.</p>
<h4 id="ollamadata__getitem__index-int---dictstr-any"><code>OllamaData.__getitem__(index: int) -&gt; Dict[str, Any]</code></h4>
<p>Gets a model by index.</p>
<ul>
<li><code>index</code>: The index of the model.</li>
</ul>
<h4 id="ollamadataget_modelname-str---dictstr-any"><code>OllamaData.get_model(name: str) -&gt; Dict[str, Any]</code></h4>
<p>Gets the model by name. Returns the most specific model that starts with the given name.</p>
<ul>
<li><code>name</code>: The name of the model.</li>
</ul>
<h4 id="ollamadataget_models---dictstr-any"><code>OllamaData.get_models() -&gt; Dict[str, Any]</code></h4>
<p>Gets the models. Caches the model data to avoid repeated regeneration.</p>
<h4 id="ollamadatasearchquery-str---regex-optionalstr--none-regex_path-str-----dictstr-any"><code>OllamaData.search(query: str = '[*]', regex: Optional[str] = None, regex_path: str = '@') -&gt; Dict[str, Any]</code></h4>
<p>Queries, searches, and views the models using a JMESPath query, regex filter, and exclude keys.</p>
<ul>
<li><code>query</code>: The JMESPath query to filter and provide a view of the models.</li>
<li><code>regex</code>: The regex pattern to match against the output.</li>
<li><code>regex_path</code>: The JMESPath query for the regex pattern.</li>
</ul>
<h3 id="usage-example">Usage Example</h3>
<p>Here is an example of how to use the <code>OllamaData</code> class programmatically:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> ollama_data <span style="color:#66d9ef">as</span> od
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize the OllamaData object</span>
</span></span><span style="display:flex;"><span>models <span style="color:#f92672">=</span> od<span style="color:#f92672">.</span>OllamaData(cache_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;~/.ollama_data/cache&#39;</span>, cache_time<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1 day&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get the schema of the OllamaData object</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Schema:&#34;</span>, models<span style="color:#f92672">.</span>get_schema())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List all models</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Models:&#34;</span>, ollama_data<span style="color:#f92672">.</span>get_models())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get a specific model by name</span>
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>get_model(<span style="color:#e6db74">&#39;mistral&#39;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Specific Model:&#34;</span>, model[<span style="color:#e6db74">&#39;name&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Search models using a JMESPath query</span>
</span></span><span style="display:flex;"><span>query_result <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>search(query<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;[*].{name: name, size: total_weights_size}&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Query Result:&#34;</span>, query_result)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Search models using a JMESPath query and regex filter</span>
</span></span><span style="display:flex;"><span>query_regex_result <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>search(
</span></span><span style="display:flex;"><span>    query<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;[*].{name: name, size: total_weights_size}&#34;</span>,
</span></span><span style="display:flex;"><span>    regex<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mistral&#34;</span>, regex_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Query Regex Result:&#34;</span>, query_regex_result)
</span></span></code></pre></div><h2 id="ollama-data-query">Ollama Data Query</h2>
<p>The <code>ollama_data_query.py</code> script allows users to search and filter Ollama models using JMESPath queries and regular expressions. This tool is designed to help users explore and retrieve specific information about the models in their Ollama registry.</p>
<h3 id="features-1">Features</h3>
<ul>
<li>Perform JMESPath queries to filter model data.</li>
<li>Use regular expressions to match specific patterns within the model data.</li>
<li>Print the JSON schema of the models.</li>
<li>Support for piped input queries.</li>
</ul>
<h3 id="arguments">Arguments</h3>
<ul>
<li><code>query</code>: The JMESPath query to filter results.</li>
<li><code>--regex</code>: Regular expression to match.</li>
<li><code>--regex-path</code>: The JMESPath query for the regex pattern to apply against (default: <code>@</code>).</li>
<li><code>--schema</code>: Print the JSON schema.</li>
<li><code>--debug</code>: Set logging level to DEBUG.</li>
<li><code>--cache-time</code>: Time to keep the cache file (default: <code>1 hour</code>).</li>
<li><code>--cache-path</code>: The path to the cache file (default: <code>~/.ollama_data/cache</code>).</li>
</ul>
<h3 id="usage">Usage</h3>
<p>To perform a JMESPath query:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_query <span style="color:#e6db74">&#34;max_by(@, &amp;total_weights_size).{name: name, size: total_weights_size}&#34;</span>
</span></span></code></pre></div><p>To use a regular expression to filter results:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_query --regex <span style="color:#e6db74">&#34;mistral:latest&#34;</span> --regex-path name <span style="color:#e6db74">&#34;[*].{name: name, size: total_weights_size}&#34;</span>
</span></span></code></pre></div><p>To pipe a query from a file or another command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat query.txt | ollama_data_query
</span></span></code></pre></div><p>Using regex and regex-path with a piped query:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;[*].{info: { name: name, other: weights}}&#34;</span> | ollama_data_query --regex 14f2 --regex-path <span style="color:#e6db74">&#34;info.other[*].file_name&#34;</span>
</span></span></code></pre></div><h3 id="examples">Examples</h3>
<h4 id="query-for-the-largest-model">Query for the Largest Model</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_query <span style="color:#e6db74">&#34;max_by(@, &amp;total_weights_size).{name: name, sz: total_weights_size}&#34;</span>
</span></span></code></pre></div><h4 id="filter-models-using-regex">Filter Models Using Regex</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_query --regex <span style="color:#e6db74">&#34;mistral|llama3&#34;</span> --regex-path name <span style="color:#e6db74">&#34;[*].{name: name, size: total_weights_size}&#34;</span>
</span></span></code></pre></div><h4 id="pipe-a-query-from-a-file">Pipe a Query from a File</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat query.txt | ollama_data_query
</span></span></code></pre></div><h4 id="use-regex-with-a-piped-query">Use Regex with a Piped Query</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;[*].{info: { name: name, other: weights}}&#34;</span> | ollama_data_query --regex 14f2 --regex-path <span style="color:#e6db74">&#34;info.other[*].file_name&#34;</span>
</span></span></code></pre></div><h2 id="ollama-data-export">Ollama Data Export</h2>
<p>The <code>ollama_data_export</code> script allows users to export Ollama models to a specified directory. This tool creates soft links for the model weights and saves the model metadata in the output directory.</p>
<h3 id="features-2">Features</h3>
<ul>
<li>Export specified models to a self-contained directory.</li>
<li>Create soft links for model weights.</li>
<li>Save model metadata in JSON format.</li>
<li>Enable debug logging for detailed output.</li>
</ul>
<h3 id="arguments-1">Arguments</h3>
<ul>
<li><code>outdir</code>: The output directory where the models will be exported.</li>
<li><code>--models</code>: Comma-separated list of models to export. If not specified, all models will be exported.</li>
<li><code>--cache-path</code>: The path to the cache file (default: <code>~/.ollama_data/cache</code>).</li>
<li><code>--cache-time</code>: The time to keep the cache file (default: <code>1 day</code>).</li>
<li><code>--debug</code>: Enable debug logging.</li>
<li><code>--hash-length</code>: The length of the hash to use for the weight soft-links (default: <code>8</code>).</li>
</ul>
<h3 id="usage-1">Usage</h3>
<p>To export specified models to a directory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_export --models model1,model2 --outdir /path/to/export
</span></span></code></pre></div><p>To export all models to a directory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_export /path/to/export
</span></span></code></pre></div><h3 id="examples-1">Examples</h3>
<h4 id="export-specified-models">Export Specified Models</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_export --models mistral,llama3 --outdir /path/to/export
</span></span></code></pre></div><h4 id="export-all-models">Export All Models</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_export --ourdir /path/to/export
</span></span></code></pre></div><h4 id="enable-debug-logging">Enable Debug Logging</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_export --models mistral --outdir /path/to/export --debug
</span></span></code></pre></div><h4 id="specify-hash-length-for-soft-links">Specify Hash Length for Soft Links</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_export --models mistral --outdir /path/to/export --hash-length <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><h2 id="ollama-data-adapter">Ollama Data Adapter</h2>
<p>The <code>ollama_data_adapter</code> script adapts Ollama models for use with other inference engines, such as <code>llamacpp</code>. This tool is designed to reduce friction when experimenting with local LLM models and integrates with other tools for viewing, searching, and exporting Ollama models.</p>
<h3 id="features-3">Features</h3>
<ul>
<li>List available engines and models.</li>
<li>Run models with specified engines.</li>
<li>Show the template for a given model.</li>
<li>Pass additional arguments to the inference engine.</li>
<li>Debugging information for advanced users.</li>
</ul>
<h3 id="arguments-2">Arguments</h3>
<ul>
<li><code>model</code>: The model to run.</li>
<li><code>engine</code>: The engine to use.</li>
<li><code>--engine-path</code>: The path to the engine (required).</li>
<li><code>--list-engines</code>: List available engines.</li>
<li><code>--list-models</code>: List available models.</li>
<li><code>--cache-path</code>: The path to the cache file (default: <code>~/.ollama_data/cache</code>).</li>
<li><code>--cache-time</code>: The time to keep the cache file (default: <code>1 day</code>).</li>
<li><code>--engine-args</code>: Arguments to pass through to the engine.</li>
<li><code>--debug</code>: Print debug information.</li>
<li><code>--show-template</code>: Show the template for the model.</li>
</ul>
<h3 id="usage-2">Usage</h3>
<p>To list all available engines:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_adapter --list-engines
</span></span></code></pre></div><p>To list all available models:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_adapter --list-models
</span></span></code></pre></div><p>To show the template for a specific model:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_adapter mistral --show-template
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## The template for the model has the following forms:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## - [INST] {{ .System }} {{ .Prompt }} [/INST]</span>
</span></span></code></pre></div><p>To run a specific model with an engine:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_adapter model engine --engine-path /path/to/engine --engine-args <span style="color:#e6db74">&#39;arg1&#39;</span> ... <span style="color:#e6db74">&#39;argn&#39;</span>
</span></span></code></pre></div><h3 id="example">Example</h3>
<p>To use the <code>llamacpp</code> inference engine with the <code>mistral</code> model (assuming
it is available in your <code>Ollama</code> registry), you might use the following
arguments:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>ollama_data_adapter
</span></span><span style="display:flex;"><span>    mistral                          <span style="color:#75715e"># Also matches `mistral:latest`</span>
</span></span><span style="display:flex;"><span>    llamacpp                         <span style="color:#75715e"># Use the llamacpp engine</span>
</span></span><span style="display:flex;"><span>    --engine-path /path/to/llamacpp  <span style="color:#75715e"># Path to engine, e.g. ~/llamacpp/main</span>
</span></span><span style="display:flex;"><span>    --engine-args                    <span style="color:#75715e"># Pass these arguments into the engine </span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;--n-gpu-layers 40&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;--prompt &#34;[INST] You are a helpful AI assistant. [/INST]&#34;&#39;</span>
</span></span></code></pre></div><p>The <code>--prompt</code> engine pass-through argument follows the template shown by
the <code>ollama_data_adapter mistral --show-template</code>.</p>
<p>We place a lot of burden on the end-user to get the formatting right. These
models are very sensitive to how you prompt them, so some experimentation
may be necessary.</p>
<p>You may also want to use <code>ollama_data_query</code> to show the system message
or other properties of a model, so that you can further customize the
pass-through arguments to better fit its training data.</p>
<h2 id="contributing">Contributing</h2>
<p>Contributions are welcome! Please submit a pull request or open an issue to discuss changes.</p>
<h2 id="license">License</h2>
<p>This project is licensed under the MIT License. See the <a href="LICENSE">LICENSE</a> file for details.</p>
<h2 id="author">Author</h2>
<p>Alex Towell</p>
<ul>
<li>Email: <a href="mailto:lex@metafunctor.com">lex@metafunctor.com</a></li>
<li>Twitter: <a href="https://twitter.com/queelius">@queelius</a></li>
<li>Website: <a href="https://metafunctor.com">metafunctor</a></li>
<li>GitHub: <a href="https://github.com/queelius">@queelius</a></li>
</ul>

          </p>
        </section>
      </div>

    
    


      
      <aside>
        
        
        
        <section style="margin-bottom: 1rem;">
          <h2 style="font-size: 1.5rem;">Related</h2>
          <div style="display: flex; flex-direction: column; gap: 1rem;">
            
            <a href="http://192.168.0.225:42999/projects/ollama_data_tools/">ollama_data_tools</a>
            
            <a href="http://192.168.0.225:42999/projects/algotree/">AlgoTree</a>
            
            <a href="http://192.168.0.225:42999/ghprojects/algotree/">AlgoTree</a>
            
            <a href="http://192.168.0.225:42999/projects/hypothesize/">hypothesize</a>
            
            <a href="http://192.168.0.225:42999/ghprojects/hypothesize/">hypothesize</a>
            
          </div>
        </section>
        

        
        
        <section style="margin-bottom: 1rem;">
          <h2 style="font-size: 1.5rem">Tags</h2>
          <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
            
            <a href="/tags/github" style="display: inline-block; padding: 0.5rem 1rem; background-color: #f0f0f0; border-radius: 20px; font-size: 1rem; text-decoration: none; color: #007acc; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
              GitHub
            </a>
            
            <a href="/tags/project" style="display: inline-block; padding: 0.5rem 1rem; background-color: #f0f0f0; border-radius: 20px; font-size: 1rem; text-decoration: none; color: #007acc; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
              project
            </a>
            
          </div>
        </section>
        
      </aside>

    </div>
  </div>

</section>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://192.168.0.225:42999/" >
    &copy;  metafunctor 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
