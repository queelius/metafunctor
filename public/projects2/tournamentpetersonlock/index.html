<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://unpkg.com/lunr/lunr.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>tournamentpetersonlock | metafunctor</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Scalable lock based on 2-thread Peterson lock.">
    <meta name="generator" content="Hugo 0.139.2">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    
      <meta name="author" content = "Alex Towell">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)'], ['$', '$']]      
    }
  };
</script>
        
    
    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/projects2/tournamentpetersonlock/">
    

    <meta property="og:url" content="http://localhost:1313/projects2/tournamentpetersonlock/">
  <meta property="og:site_name" content="metafunctor">
  <meta property="og:title" content="tournamentpetersonlock">
  <meta property="og:description" content="Scalable lock based on 2-thread Peterson lock.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects2">
    <meta property="article:published_time" content="2023-12-07T20:57:14+00:00">
    <meta property="article:modified_time" content="2023-12-07T20:57:14+00:00">
    <meta property="article:tag" content="GitHub">
    <meta property="article:tag" content="Project">

  <meta itemprop="name" content="tournamentpetersonlock">
  <meta itemprop="description" content="Scalable lock based on 2-thread Peterson lock.">
  <meta itemprop="datePublished" content="2023-12-07T20:57:14+00:00">
  <meta itemprop="dateModified" content="2023-12-07T20:57:14+00:00">
  <meta itemprop="wordCount" content="700">
  <meta itemprop="keywords" content="GitHub,Project">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="tournamentpetersonlock">
  <meta name="twitter:description" content="Scalable lock based on 2-thread Peterson lock.">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        metafunctor
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/social/" title="Social page">
              Social
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About Me page">
              About Me
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/ghprojects/" title="GitHub Projects page">
              GitHub Projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="News page">
              News
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/probsets/" title="Problem Sets page">
              Problem Sets
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/projects2/" title="Projects page">
              Projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/publications/" title="Publications page">
              Publications
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/research/" title="Research projects page">
              Research projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/search/" title="Search page">
              Search
            </a>
          </li>
          
        </ul>
      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Projects
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">tournamentpetersonlock</h1>
      
      <p class="tracked">
        By <strong>Alex Towell</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2023-12-07T20:57:14Z">December 7, 2023</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Scalable lock based on 2-thread Peterson lock.</p>
<p><strong>Stars</strong>: 0 | <strong>Forks</strong>: 0 | <strong>Open Issues</strong>: 0</p>
<p><strong>Languages</strong>: Java</p>
<h2 id="contributors">Contributors</h2>
<ul>
<li>queelius (2 commits)</li>
</ul>
<h2 id="readme">README</h2>
<h1 id="java-package-tournamentpetersonlock">Java Package: <code>tournamentpetersonlock</code></h1>
<h2 id="overview">Overview</h2>
<p><code>tournamentpetersonlock</code> is an elegant Java implementation of a scalable locking mechanism based on the classic Peterson lock algorithm. This project addresses the challenge of generalizing the two-thread Peterson lock to accommodate <code>n</code> threads, with <code>n</code> being a power of two, using a binary tree of Peterson locks.</p>
<p>Developed as a response to Exercise 13 in &ldquo;The Art of Multiprocessor Programming&rdquo; by Maurice Herlihy and Nir Shavit (2008), it was part of the coursework for CS-590 Multiprocessor Synchronization at SIUE under Dr. Greg Stephen.</p>
<h2 id="features">Features</h2>
<ul>
<li><strong>Binary Tree Structure</strong>: Utilizes a binary tree of 2-thread Peterson locks.</li>
<li><strong>Scalable Synchronization</strong>: Designed to handle a power of two number of threads for efficient multi-thread synchronization.</li>
<li><strong>Thread Safety</strong>: Ensures mutual exclusion, deadlock freedom, and starvation freedom in concurrent environments.</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<p>To use <code>tournamentpetersonlock</code> in your project, clone this repository and include the Java files in your project&rsquo;s classpath.</p>
<h3 id="installation">Installation</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/queelius/tournamentpetersonlock.git
</span></span></code></pre></div><h2 id="building-and-testing-with-maven">Building and Testing with Maven</h2>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Java Development Kit (JDK) - Version 1.8 or above.</li>
<li>Maven - If not already installed, you can download it from <a href="https://maven.apache.org/download.cgi">Maven&rsquo;s official website</a>.</li>
</ul>
<h3 id="building-the-project">Building the Project</h3>
<p>Navigate to the project&rsquo;s root directory and run the following command to compile the project:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mvn compile
</span></span></code></pre></div><h3 id="running-tests">Running Tests</h3>
<p>To run the tests, execute:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mvn test
</span></span></code></pre></div><p>This command will automatically handle downloading the necessary dependencies, compiling the source code, and running the tests.</p>
<h2 id="usage">Usage</h2>
<p>After building the project with Maven, you can use <code>tournamentpetersonlock</code> in your Java applications. Here&rsquo;s a minimal working example demonstrating how to use <code>tournamentpetersonlock</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> tournamentpetersonlock.TournamentLock;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TournamentExample</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Number of threads (must be a power of two)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> numThreads <span style="color:#f92672">=</span> 4;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Create an instance of the lock</span>
</span></span><span style="display:flex;"><span>        TournamentLock lock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TournamentLock(numThreads);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Example usage of the lock in a thread</span>
</span></span><span style="display:flex;"><span>        Runnable task <span style="color:#f92672">=</span> () <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>            lock.<span style="color:#a6e22e">lock</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Critical section</span>
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Thread &#34;</span> <span style="color:#f92672">+</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; is in the critical section&#34;</span>);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">finally</span> {
</span></span><span style="display:flex;"><span>                lock.<span style="color:#a6e22e">unlock</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Starting threads</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> numThreads; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Thread(task).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This example creates an <code>TournamentLock</code> lock for a specified number of threads and demonstrates its usage in a multi-threaded context. Each thread acquires the lock before entering the critical section and releases it afterward.</p>
<p>Note: Ensure that the number of threads is a power of two, as required by the <code>TournamentLock</code> implementation.</p>
<h3 id="running-the-example-with-maven">Running the Example With Maven</h3>
<ul>
<li>
<p>Place the above code in a file named <code>TournamentExample.java</code> in the <code>src/main/java</code> directory of your project.</p>
</li>
<li>
<p>Compile and run the example using Maven:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>  mvn compile
</span></span><span style="display:flex;"><span>  mvn exec:java -Dexec.mainClass<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tournamentpetersonlock.PetersonLockExample&#34;</span>
</span></span></code></pre></div><h3 id="running-the-example-without-maven">Running the Example Without Maven</h3>
<ul>
<li>
<p>Place example code into <code>TournamentExample.java</code> somewhere.</p>
</li>
<li>
<p>This step requires Maven: Make sure you packaged <code>tournamentpetersonlock</code> into a JAR:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mvn package
</span></span></code></pre></div><ul>
<li>
<p>Place the JAR package into same directory as <code>TournamentExample.java</code> and rename it to <code>tournamentpetersonlock-1.0.jar</code>.</p>
</li>
<li>
<p>Compile and run the example:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>javac -cp .:tournamentpetersonlock-1.0.jar TournamentExample.java
</span></span><span style="display:flex;"><span>java -cp .:tournamentpetersonlock-1.0.jar TournamentExample
</span></span></code></pre></div><h2 id="theoretical-background">Theoretical Background</h2>
<p>The <code>tournamentpetersonlock</code> is underpinned by key theoretical principles ensuring robust and reliable synchronization in multi-threaded environments:</p>
<ul>
<li>
<p><strong>Mutual Exclusion</strong>: Each node in the binary tree represents a 2-thread Peterson lock. Threads are only promoted to the next layer if they acquire the lock at their current layer, ensuring that at any level, only half of the threads can progress. This process leads to mutual exclusion at the root, extending to the entire tree.</p>
</li>
<li>
<p><strong>Freedom from Deadlock</strong>: Upon release, a thread sets its flag variable to false for each node along its path. This action allows other threads, which were previously unable to progress due to the lock, to move forward, thus preventing deadlock in the system.</p>
</li>
<li>
<p><strong>Freedom from Starvation</strong>: Since each Peterson lock is starvation-free and the earlier arriving thread (which is not the victim) at a node gets promoted, this property is recursively maintained at each tree layer. Consequently, the entire tree structure is free from starvation.</p>
</li>
</ul>
<h2 id="contributing">Contributing</h2>
<p>Contributions to <code>tournamentpetersonlock</code> are welcome. Please review any contribution guidelines in this repository and ensure to follow standard practices for contributing to open source projects.</p>
<h2 id="license">License</h2>
<p>This project is licensed under the <a href="LICENSE">MIT License</a>.</p>
<ul class="pa0">
  
   <li class="list di">
     <a href="/tags/github/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">GitHub</a>
   </li>
  
   <li class="list di">
     <a href="/tags/project/" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Project</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
        <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "metafunctor-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/ghprojects/tournamentpetersonlock/">tournamentpetersonlock</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/ghprojects/reliability-estimation-in-series-systems-model-selection/">reliability-estimation-in-series-systems-model-selection</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/projects2/reliability-estimation-in-series-systems-model-selection/">reliability-estimation-in-series-systems-model-selection</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/projects2/disjoint_interval_set/">disjoint_interval_set</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/ghprojects/disjoint_interval_set/">disjoint_interval_set</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/projects2/wei.series.md.c1.c2.c3/">wei.series.md.c1.c2.c3</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/ghprojects/wei.series.md.c1.c2.c3/">wei.series.md.c1.c2.c3</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/ghprojects/reliability-estimation-in-series-systems/">reliability-estimation-in-series-systems</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/projects2/reliability-estimation-in-series-systems/">reliability-estimation-in-series-systems</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/projects2/dfr_dist/">dfr_dist</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/ghprojects/dfr_dist/">dfr_dist</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/projects2/likelihood.model.series.md/">likelihood.model.series.md</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/ghprojects/likelihood.model.series.md/">likelihood.model.series.md</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/projects2/chatgpt-pysearch/">chatgpt-pysearch</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/ghprojects/chatgpt-pysearch/">chatgpt-pysearch</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  metafunctor 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
